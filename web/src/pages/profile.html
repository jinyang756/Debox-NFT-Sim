<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>聚财中法虚拟交易平台 - 我的</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Header 组件
        function Header({ title = "聚财中法" }) {
            return (
                <div className="flex items-center justify-between px-4 py-2 bg-white shadow sticky top-0 z-10">
                    <div className="text-xl font-bold text-blue-600">
                        {title}
                    </div>
                    <div className="hidden md:flex gap-4">
                        <a href="/" className="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-100 block">
                            首页
                        </a>
                        <a href="/market" className="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-100 block">
                            行情
                        </a>
                        <a href="/trade" className="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-100 block">
                            交易
                        </a>
                        <a href="/profile" className="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-100 block">
                            我的
                        </a>
                    </div>
                    <div className="relative">
                        <input
                            type="text"
                            placeholder="搜索基金、合约或期权..."
                            className="pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                        <svg
                            className="absolute left-3 top-2.5 h-5 w-5 text-gray-400"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                strokeLinecap="round"
                                strokeLinejoin="round"
                                strokeWidth={2}
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                            />
                        </svg>
                    </div>
                </div>
            );
        }

        // TabBar 组件
        function TabBar() {
            const tabs = [
                { name: '首页', href: '/', active: false },
                { name: '行情', href: '/market', active: false },
                { name: '交易', href: '/trade', active: false },
                { name: '我的', href: '/profile', active: true }
            ];

            return (
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 md:hidden">
                    <div className="grid grid-cols-4">
                        {tabs.map((tab, index) => (
                            <a
                                key={index}
                                href={tab.href}
                                className={`flex flex-col items-center justify-center py-2 px-1 ${
                                    tab.active ? 'text-blue-600' : 'text-gray-500'
                                }`}
                            >
                                <span className="text-xs mt-1">{tab.name}</span>
                            </a>
                        ))}
                    </div>
                </div>
            );
        }

        // UserCard 组件
        function UserCard({ user }) {
            return (
                <div className="flex items-center gap-4 p-4 bg-white rounded shadow">
                    <img src={user.avatar} alt="avatar" className="w-16 h-16 rounded-full" />
                    <div>
                        <h2 className="text-lg font-bold">{user.nickname}</h2>
                        <p className="text-sm text-gray-500">{user.phone}</p>
                    </div>
                </div>
            );
        }

        // FavoritesSection 组件
        function FavoritesSection() {
            // 模拟收藏数据
            const data = {
                '基金': [
                    { id: '1', name: '全球增长基金', code: 'JJ001' },
                    { id: '2', name: '医疗保健基金', code: 'JJ002' }
                ],
                '合约': [
                    { id: '3', name: 'BTC永续合约', code: 'HY001' },
                    { id: '4', name: 'ETH季度合约', code: 'HY002' }
                ],
                '期权': [
                    { id: '5', name: 'AAPL期权', code: 'QX001' },
                    { id: '6', name: 'TSLA期权', code: 'QX002' }
                ]
            };

            return (
                <div className="space-y-2">
                    <h3 className="text-lg font-bold">我的收藏</h3>
                    {['基金', '合约', '期权'].map(type => (
                        <div key={type}>
                            <h4 className="text-sm text-gray-600">{type}</h4>
                            <div className="flex gap-2 overflow-x-auto pb-2">
                                {data[type]?.map(item => (
                                    <div key={item.id} className="p-2 border rounded min-w-[120px] bg-white">
                                        <p className="font-semibold">{item.name}</p>
                                        <p className="text-xs text-gray-500">{item.code}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );
        }

        // SettingsPanel 组件
        function SettingsPanel() {
            const [settings, setSettings] = React.useState({
                notifications: false,
                language: false,
                darkMode: false
            });

            const toggleSetting = (setting) => {
                setSettings(prev => ({
                    ...prev,
                    [setting]: !prev[setting]
                }));
            };

            return (
                <div className="bg-white rounded shadow divide-y">
                    <SettingItem 
                        label="通知提醒" 
                        isEnabled={settings.notifications} 
                        onToggle={() => toggleSetting('notifications')} 
                    />
                    <SettingItem 
                        label="语言切换" 
                        isEnabled={settings.language} 
                        onToggle={() => toggleSetting('language')} 
                    />
                    <SettingItem 
                        label="深色模式" 
                        isEnabled={settings.darkMode} 
                        onToggle={() => toggleSetting('darkMode')} 
                    />
                </div>
            );
        }

        function SettingItem({ label, isEnabled, onToggle }) {
            return (
                <div className="flex justify-between items-center px-4 py-3">
                    <span>{label}</span>
                    <Switch isEnabled={isEnabled} onToggle={onToggle} />
                </div>
            );
        }

        function Switch({ isEnabled, onToggle }) {
            return (
                <button
                    onClick={onToggle}
                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                        isEnabled ? 'bg-blue-600' : 'bg-gray-300'
                    }`}
                >
                    <span
                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                            isEnabled ? 'translate-x-6' : 'translate-x-1'
                        }`}
                    />
                </button>
            );
        }

        // AccountActions 组件
        function AccountActions() {
            const handleLogout = () => {
                // 处理退出登录逻辑
                console.log('退出登录');
            };

            return (
                <div className="space-y-2">
                    <button className="w-full bg-white py-3 rounded shadow text-left px-4">修改密码</button>
                    <button 
                        onClick={handleLogout}
                        className="w-full bg-white py-3 rounded shadow text-left px-4 text-red-500"
                    >
                        退出登录
                    </button>
                    <p className="text-center text-xs text-gray-400">版本号 v1.0.0</p>
                </div>
            );
        }

        // 我的页面组件
        function ProfilePage() {
            const [user, setUser] = React.useState({});

            // 模拟获取用户数据
            React.useEffect(() => {
                // 模拟用户数据
                const mockUser = {
                    avatar: 'https://via.placeholder.com/150',
                    nickname: '张三',
                    phone: '138****8888'
                };
                setUser(mockUser);
            }, []);

            return (
                <div className="min-h-screen bg-gray-50 flex flex-col pb-16 md:pb-0">
                    <Header title="我的" />

                    <main className="flex-1 p-4 space-y-6 mt-16 md:mt-0">
                        <UserCard user={user} />
                        <FavoritesSection />
                        <SettingsPanel />
                        <AccountActions />
                    </main>

                    <TabBar />
                </div>
            );
        }

        // 渲染应用
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProfilePage />);
    </script>
</body>
</html>